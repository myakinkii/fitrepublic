const { errors } = require('./constants');


function getId(srv,tx){
	const { ShortLinks } = srv.entities;
	// const tx = srv.transaction();
	const linkId=Math.random().toString(26).slice(2,10).toLowerCase();
	return tx.read(ShortLinks,{id:linkId}).then(function(link){
		if (link) return getId(srv,tx);
		else return Promise.resolve(linkId);
	});
}

function createLink(pars,srv,tx){
	const { ShortLinks } = srv.entities;
	// const tx = srv.transaction();
	return getId(srv,tx).then(function(linkId){
		return tx.create(ShortLinks).entries({
			id:linkId,
			baseUrl:'',
			pars:pars
		});
	}).then(function(link){
		return Promise.resolve(link.id);
	});
}

function resolveLink(linkId,srv,tx){
	const { ShortLinks } = srv.entities;
	// const tx = srv.transaction();
	return tx.read(ShortLinks,{id:linkId}).then(function(link){
		if (link) return tx.update(ShortLinks,{id:link.id}).with({ viewCount:{"=":link.viewCount+1} });
		return Promise.resolve();
	}).then(function(){
		return tx.read(ShortLinks,{id:linkId});
	});
}

const renderers={
	'E':renderEquipment
};

function renderPageTemplate(linkData, linksSettings, res, srv, tx){
	if (!linkData.linkType) return renderUrlPage(linkData, linksSettings, res);
	else return renderers[linkData.linkType](linkData, linksSettings, res, srv, tx);
}

function renderEquipment(linkData, linksSettings, res, srv, tx){
	const { EquipmentVideos } = srv.entities;
	// const tx = srv.transaction();
	var linkId=linkData.id;
	var installUrl=linksSettings.redirect;
	return tx.read(EquipmentVideos).where({linkId:linkId}).then(function(videos){
		var equipment=videos[0];
		if (!equipment) return res.redirect(301,installUrl);
		res.writeHead(200,{"Content-Type" : "text/html"});
		res.write('<head><meta name="viewport" content="width=device-width" charset="utf-8"></head>');
		res.write('<body><div style="margin:auto;text-align:center;">');
		
		res.write('<br><span style="font-size:1.4rem;">'+equipment.description+'</span>');
		
		videos.forEach(function(v){
			res.write('<br><br><a href="'+v.url+'" style="font-size:1.4rem;" target="_blank">'+v.title+" "+(v.subtitle||'')+'</a>')
			res.write('<br><span>'+"by "+v.authorName+'</span>');
		});
		
		res.write('<br><br><a style="font-size:1.2rem;" href="'+installUrl+'">Установить приложение для бесплатного доступа к более 300 других видео</a>');
		res.write('<br><img src="'+logo+'">');
		
		res.write("</div></body>");
		res.write("</html>");
		return Promise.resolve(true);
	});
}

function renderUrlPage(linkData, linksSettings, res, tx){
	var installUrl=linksSettings.redirect;
	var appUrl=linksSettings.scheme+"://"+linkData.baseUrl+"?"+linkData.pars;
	res.writeHead(200,{"Content-Type" : "text/html"});
	res.write('<head><meta name="viewport" content="width=device-width" charset="utf-8"></head>');
	res.write('<body><div style="margin:auto;text-align:center;">');
	
	res.write('<br><a style="font-size:1.4rem;" href="'+installUrl+'">Установить приложение</a>');
	res.write('<br><br><br><span style="font-size:1.4rem;" >или</span>')
	res.write('<br><br><br><a href="'+appUrl+'" style="font-size:1.6rem;" >Открыть в f-r</a>')
	res.write('<br><a href="'+appUrl+'">');
	res.write('<img src="'+logo+'">');
	res.write('</a>');
	
	res.write("</div></body>");
	res.write("</html>");
	return Promise.resolve(true);
}

module.exports={
	createLink:createLink,
	resolveLink:resolveLink,
	renderPageTemplate:renderPageTemplate
};

const logo="data:image/png;base64,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";